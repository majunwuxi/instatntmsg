# 超级用户功能指南

## 功能定位调整

超级用户(admin)的功能已重新定位，专注于系统管理和配置，不再参与交易信号发送。

## 超级用户专属功能

### 1. 用户管理
- **查看所有用户**：显示用户列表和详细信息
- **用户状态管理**：启用/禁用用户账户
- **用户删除**：删除普通用户账户
- **权限保护**：无法操作其他管理员账户

### 2. 邮件API配置管理
- **配置查看**：显示当前邮件API配置状态
- **配置说明**：提供详细的配置指导
- **环境变量管理**：指导如何设置邮件相关配置

### 3. 系统日志查看
- **操作日志**：查看所有系统操作记录
- **用户活动**：监控用户登录、注册等活动
- **系统事件**：查看管理操作和系统事件

## 登录信息

- **用户名**：`admin`
- **密码**：通过环境变量 `ADMIN_PASSWORD` 配置
- **权限**：超级管理员
- **邮箱验证**：无需验证，可直接登录

### 设置管理员密码

1. **开发环境**：
   - 在 `.env.local` 文件中设置：`ADMIN_PASSWORD=your_secure_password`
   - 如果未设置，系统将使用默认密码 `admin123`

2. **生产环境**：
   - 必须设置环境变量 `ADMIN_PASSWORD`
   - 使用强密码（至少12位，包含大小写字母、数字和特殊字符）
   - 如果未设置，系统将拒绝启动

## 界面功能

### 用户管理界面
- **用户列表表格**：
  - 用户名和管理员标识
  - 邮箱地址
  - 验证状态（已验证/未验证）
  - Webhook配置状态（已配置/未配置）
  - 注册时间
  - 操作按钮（启用/禁用、删除）

- **操作功能**：
  - **启用/禁用**：切换用户的邮箱验证状态
  - **删除用户**：永久删除用户及其数据
  - **刷新列表**：实时更新用户信息

### 邮件配置界面
- **配置状态显示**：
  - Resend API Key 配置状态
  - 发件人邮箱配置状态
  - 配置说明和指导

- **配置管理**：
  - 环境变量配置指导
  - 重启服务说明
  - 安全配置建议

## 权限控制

### 管理员权限
✅ 查看所有用户信息  
✅ 启用/禁用普通用户  
✅ 删除普通用户  
✅ 查看系统日志  
✅ 查看邮件配置状态  

### 权限限制
❌ 无法操作其他管理员账户  
❌ 无法发送交易信号  
❌ 无法配置个人Webhook  
❌ 无法直接修改邮件配置（需要服务器级别操作）  

## 与普通用户的区别

| 功能 | 超级用户 | 普通用户 |
|------|----------|----------|
| 交易信号发送 | ❌ | ✅ |
| Webhook配置 | ❌ | ✅ |
| 用户管理 | ✅ | ❌ |
| 系统配置 | ✅ | ❌ |
| 邮件验证 | 不需要 | 需要 |
| 日志查看 | 全系统 | 仅个人 |

## 安全特性

### 操作审计
- 所有管理操作都会记录日志
- 包含操作时间、操作类型、目标用户
- 用户状态变更会通知被操作用户

### 权限隔离
- 管理员无法访问用户的Webhook配置
- 管理员无法代替用户发送交易信号
- 用户数据完全隔离和保护

### 安全操作
- 删除用户需要二次确认
- 操作结果实时反馈
- 详细的错误提示和处理

## 使用场景

### 日常管理
1. **监控用户活动**：查看新注册用户和活跃状态
2. **处理用户问题**：手动启用被禁用的用户
3. **清理无效用户**：删除测试或垃圾账户

### 系统维护
1. **配置邮件服务**：设置和验证邮件API
2. **监控系统日志**：查看系统运行状态
3. **用户支持**：协助用户解决账户问题

### 安全管理
1. **用户审核**：检查可疑注册账户
2. **访问控制**：临时禁用问题用户
3. **数据保护**：确保用户配置安全隔离

## 最佳实践

### 管理建议
1. **定期检查**：定期查看用户列表和活动日志
2. **谨慎操作**：删除用户前确认无重要数据
3. **及时响应**：快速处理用户账户问题

### 安全建议
1. **密码管理**：首次登录后建议修改默认密码
2. **操作记录**：重要操作前查看相关日志
3. **权限原则**：遵循最小权限原则进行管理

## 技术实现

### API端点
- `GET /api/admin/users?adminId=xxx` - 获取用户列表
- `POST /api/admin/users` - 用户管理操作

### 权限验证
- 所有管理操作都需要验证管理员身份
- API级别的权限检查和错误处理
- 操作日志自动记录

这个调整确保了超级用户专注于系统管理职责，普通用户专注于业务功能，实现了清晰的权限分离和功能边界。